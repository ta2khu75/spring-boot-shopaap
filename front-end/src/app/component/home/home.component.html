<div class="container">
  <div class="intro-section">
    <h1>Đây là trang home</h1>
    <p>Trang này hiện thị danh sách các sản phẩm, kèm ảnh</p>
    <p>Các bạn có thể chọn xem sản phẩm và mua hàng tại đây</p>
  </div>
  <div class="search-box">
    <input
    [(ngModel)]="keyword"

      type="text"
      name=""
      class="form-control search-input"
      placeholder="Tìm sản phẩm"
      id=""
    />
    <select [(ngModel)]="category_id"  class="form-control product-category">
      <option selected value="{{0}}">Tất cả</option>
      @for (category of categories; track $index) {
        <option value="{{category.id}}">{{category.name}}</option>
      }
    </select>
    <button class="btn btn-primary" (click)="searchProduct()">
      Tìm kiếm
    </button>
  </div>
  <div class="row">
    @for (product of products; track $index) {
    <div class="col-lg-4 col-md-6 col-sm-12" >
      <div class="product-item">
        <a [routerLink]="['/product', product.id]" class="nav-link">
        <img class="product-image" src="{{ product.url }}" alt="" />
        <h4 class="product-name">{{ product.name }}</h4>
        <!-- <p class="product-description">
          {{ product.description }}
        </p> -->
        <p class="product-warranty">Bảo hành: 12 tháng</p>
        <p class="product-price">Giá: {{ product.price }}đ</p>
        <div class="product-rating">
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star-half-alt"></i>
        </div>
        </a>
        <div class="product-actions">
          <button class="btn btn-primary" (click)="addToCart(product.id)">Thêm giỏ hàng</button>
          <span class="space"></span>
          <button class="btn btn-success" (click)="buyNow(product.id)">Mua ngay</button>
        </div>
      </div>
    </div>
    }
    <div class="d-flex justify-content-center">
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <!-- @if (currentPage>0) {
            <li class="page-item" (click)="onPageChange(1)">
              <a class="page-link" href="#" aria-label="First">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">First</span>
              </a>
            </li>
          } -->
          @if (currentPage>0) {
          <li class="page-item" (click)="onPageChange(currentPage - 1)">
            <a class="page-link" href="#" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          }
           @for (item of visiblePage; track $index) {
          <li class="page-item" [class.active]="item-1==currentPage" (click)="onPageChange(item-1)">
            <a class="page-link" href="#">{{ item }}</a>
          </li>
          }
          @if (currentPage<totalPages-1) {}
          <li class="page-item" (click)="onPageChange(currentPage +1)">
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
